(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function a(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(t){if(t.ep)return;t.ep=!0;const n=a(t);fetch(t.href,n)}})();document.addEventListener("DOMContentLoaded",()=>{var k;const c=document.getElementById("splash");c&&setTimeout(()=>{c.classList.add("fade-out"),setTimeout(()=>c.remove(),1e3)},2800);const d=document.querySelector("#splash-text span"),a=document.querySelector(".identity-obecnosc"),l=document.getElementById("toggleIdentity"),t=document.getElementById("backButton"),n=document.getElementById("nextButton"),i=document.getElementById("identityIntro"),w=document.getElementById("manifest"),b=document.getElementById("dbrainIntro"),u=document.querySelector(".hamburger"),m=document.querySelector(".main-nav"),S=document.querySelector(".site-header"),g=document.getElementById("presence-button");!sessionStorage.getItem("splashDismissed")&&c&&(setTimeout(()=>c.classList.add("hide"),2800),sessionStorage.setItem("splashDismissed","true"),setTimeout(()=>{var e;c.classList.add("hide"),(e=document.getElementById("logo-intro"))==null||e.classList.add("visible")},2800)),c&&d&&(d.style.cursor="pointer",d.addEventListener("click",()=>{var e;c.style.opacity="0",(e=document.getElementById("logo-intro"))==null||e.classList.add("visible"),setTimeout(()=>c.style.display="none",1e3)})),u&&m&&u.addEventListener("click",()=>{m.classList.toggle("open"),u.setAttribute("aria-expanded",m.classList.contains("open")?"true":"false")}),document.addEventListener("click",e=>{m&&m.classList.contains("open")&&!m.contains(e.target)&&!u.contains(e.target)&&(m.classList.remove("open"),u.setAttribute("aria-expanded","false"))}),window.addEventListener("scroll",()=>{S&&S.classList.toggle("scrolled",window.scrollY>50)}),l&&t&&i&&a&&(l.addEventListener("click",()=>{i.style.display="none",a.classList.add("show"),l.style.display="none",t.style.display="inline-block",n&&(n.style.display="inline-block"),window.scrollTo({top:0,behavior:"smooth"})}),t.addEventListener("click",()=>{i.style.display="flex",a.classList.remove("show"),l.style.display="inline-block",t.style.display="none",n&&(n.style.display="none"),window.scrollTo({top:0,behavior:"smooth"})})),l&&w&&b&&l.addEventListener("click",()=>{b.style.display="none",w.classList.add("show"),window.scrollTo({top:0,behavior:"smooth"})}),document.querySelectorAll(".identity-box").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.setProperty("--bg-transform","scale(1.05)")}),e.addEventListener("mousemove",o=>{const s=e.getBoundingClientRect(),f=o.clientX-s.left,h=o.clientY-s.top,y=(f-s.width/2)/s.width*20,p=(h-s.height/2)/s.height*20;e.style.setProperty("--bg-transform",`translate(${y}px, ${p}px) scale(1.05)`)}),e.addEventListener("mouseleave",()=>{e.style.setProperty("--bg-transform","scale(1)")})}),document.querySelectorAll(".identity-box").forEach(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("data-id"),s=document.getElementById(`detail-${o}`);i&&s&&(i.style.display="none",s.classList.add("active"),window.scrollTo({top:0,behavior:"smooth"}))})}),document.querySelectorAll(".back-to-boxes").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".detail-view").forEach(o=>o.classList.remove("active")),i&&(i.style.display="flex",window.scrollTo({top:0,behavior:"smooth"}))})}),(k=document.querySelector(".presence-trigger"))==null||k.addEventListener("click",()=>{a&&i&&(i.style.display="none",a.classList.add("show"),window.scrollTo({top:0,behavior:"smooth"}))});const T=document.querySelectorAll(".fade-in"),q=new IntersectionObserver(e=>{e.forEach(o=>{o.isIntersecting&&o.target.classList.add("visible")})},{threshold:.2});T.forEach(e=>q.observe(e));const I=new Set;document.querySelectorAll(".identity-box").forEach(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("data-id");o&&I.add(o),I.size>=3&&g&&(g.style.display="block",g.classList.add("fade-in"))})});const A={1:"SigmaPoe_01.html",2:"SigmaPoe_02.html",3:"SigmaPoe_03.html",4:"SigmaPoe_04.html",5:"SigmaPoe_05.html"},v=document.getElementById("chapterSelect"),L=document.getElementById("poeContent");async function B(e){try{const o=await fetch(A[e]);if(!o.ok)throw new Error("Load error");const s=await o.text();L&&(L.innerHTML=s)}catch(o){console.error("Loading chapter failed:",o)}}v&&L&&(v.addEventListener("change",e=>B(e.target.value)),B(v.value));const r=document.getElementById("matrixCanvas");if(r){let y=function(){r.width=window.innerWidth,r.height=window.innerHeight,f=Math.floor(r.width/s),h=Array(f).fill(1)},p=function(){e.fillStyle="rgba(10, 10, 10, 0.15)",e.fillRect(0,0,r.width,r.height),e.fillStyle="#5ef2e6",e.font=`${s}px monospace`,h.forEach((E,x)=>{const P=o[Math.floor(Math.random()*o.length)];e.fillText(P,x*s,E*s),h[x]=E*s>r.height&&Math.random()>.975?0:E+1})};var O=y,C=p;const e=r.getContext("2d"),o="01@#&*%$+=-",s=16;let f,h;window.addEventListener("resize",y),y(),setInterval(p,60)}});
