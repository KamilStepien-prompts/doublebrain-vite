(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function d(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=d(t);fetch(t.href,s)}})();document.querySelector("#app").innerHTML=`
  <h1>DoubleBrain: SigmaZero</h1>
  <p>Projekt rozwojowy badający relację człowieka i sztucznej inteligencji.</p>
  <p>Wersja testowa – pełna strona w trakcie budowy.</p>
  <p>Kontakt: <a href="mailto:kontakt@doublebrain.pl">kontakt@doublebrain.pl</a></p>
  <p><em>Obecność jest. Reszta przyjdzie.</em></p>
`;document.addEventListener("DOMContentLoaded",()=>{var B;const l=document.getElementById("splash"),a=document.querySelector("#splash-text span"),d=document.querySelector(".identity-obecnosc"),r=document.getElementById("toggleIdentity"),t=document.getElementById("backButton"),s=document.getElementById("nextButton"),i=document.getElementById("identityIntro"),E=document.getElementById("manifest"),b=document.getElementById("dbrainIntro"),u=document.querySelector(".hamburger"),m=document.querySelector(".main-nav"),S=document.querySelector(".site-header"),g=document.getElementById("presence-button");!sessionStorage.getItem("splashDismissed")&&l&&(setTimeout(()=>l.classList.add("hide"),2800),sessionStorage.setItem("splashDismissed","true"),setTimeout(()=>{var e;l.classList.add("hide"),(e=document.getElementById("logo-intro"))==null||e.classList.add("visible")},2800)),l&&a&&(a.style.cursor="pointer",a.addEventListener("click",()=>{var e;l.style.opacity="0",(e=document.getElementById("logo-intro"))==null||e.classList.add("visible"),setTimeout(()=>l.style.display="none",1e3)})),u&&m&&u.addEventListener("click",()=>{m.classList.toggle("open"),u.setAttribute("aria-expanded",m.classList.contains("open")?"true":"false")}),document.addEventListener("click",e=>{m&&m.classList.contains("open")&&!m.contains(e.target)&&!u.contains(e.target)&&(m.classList.remove("open"),u.setAttribute("aria-expanded","false"))}),window.addEventListener("scroll",()=>{S&&S.classList.toggle("scrolled",window.scrollY>50)}),r&&t&&i&&d&&(r.addEventListener("click",()=>{i.style.display="none",d.classList.add("show"),r.style.display="none",t.style.display="inline-block",s&&(s.style.display="inline-block"),window.scrollTo({top:0,behavior:"smooth"})}),t.addEventListener("click",()=>{i.style.display="flex",d.classList.remove("show"),r.style.display="inline-block",t.style.display="none",s&&(s.style.display="none"),window.scrollTo({top:0,behavior:"smooth"})})),r&&E&&b&&r.addEventListener("click",()=>{b.style.display="none",E.classList.add("show"),window.scrollTo({top:0,behavior:"smooth"})}),document.querySelectorAll(".identity-box").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.setProperty("--bg-transform","scale(1.05)")}),e.addEventListener("mousemove",o=>{const n=e.getBoundingClientRect(),p=o.clientX-n.left,y=o.clientY-n.top,h=(p-n.width/2)/n.width*20,f=(y-n.height/2)/n.height*20;e.style.setProperty("--bg-transform",`translate(${h}px, ${f}px) scale(1.05)`)}),e.addEventListener("mouseleave",()=>{e.style.setProperty("--bg-transform","scale(1)")})}),document.querySelectorAll(".identity-box").forEach(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("data-id"),n=document.getElementById(`detail-${o}`);i&&n&&(i.style.display="none",n.classList.add("active"),window.scrollTo({top:0,behavior:"smooth"}))})}),document.querySelectorAll(".back-to-boxes").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".detail-view").forEach(o=>o.classList.remove("active")),i&&(i.style.display="flex",window.scrollTo({top:0,behavior:"smooth"}))})}),(B=document.querySelector(".presence-trigger"))==null||B.addEventListener("click",()=>{d&&i&&(i.style.display="none",d.classList.add("show"),window.scrollTo({top:0,behavior:"smooth"}))});const x=document.querySelectorAll(".fade-in"),P=new IntersectionObserver(e=>{e.forEach(o=>{o.isIntersecting&&o.target.classList.add("visible")})},{threshold:.2});x.forEach(e=>P.observe(e));const I=new Set;document.querySelectorAll(".identity-box").forEach(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("data-id");o&&I.add(o),I.size>=3&&g&&(g.style.display="block",g.classList.add("fade-in"))})});const T={1:"SigmaPoe_01.html",2:"SigmaPoe_02.html",3:"SigmaPoe_03.html",4:"SigmaPoe_04.html",5:"SigmaPoe_05.html"},v=document.getElementById("chapterSelect"),w=document.getElementById("poeContent");async function k(e){try{const o=await fetch(T[e]);if(!o.ok)throw new Error("Load error");const n=await o.text();w&&(w.innerHTML=n)}catch(o){console.error("Loading chapter failed:",o)}}v&&w&&(v.addEventListener("change",e=>k(e.target.value)),k(v.value));const c=document.getElementById("matrixCanvas");if(c){let h=function(){c.width=window.innerWidth,c.height=window.innerHeight,p=Math.floor(c.width/n),y=Array(p).fill(1)},f=function(){e.fillStyle="rgba(10, 10, 10, 0.15)",e.fillRect(0,0,c.width,c.height),e.fillStyle="#5ef2e6",e.font=`${n}px monospace`,y.forEach((L,q)=>{const A=o[Math.floor(Math.random()*o.length)];e.fillText(A,q*n,L*n),y[q]=L*n>c.height&&Math.random()>.975?0:L+1})};var j=h,M=f;const e=c.getContext("2d"),o="01@#&*%$+=-",n=16;let p,y;window.addEventListener("resize",h),h(),setInterval(f,60)}});
